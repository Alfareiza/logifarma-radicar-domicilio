{% extends "base/base.html" %}
{% load static %}
{% load my_filters %}
{% block title %}Elige el barrio{% endblock %}

{% block content %}
<section class="vista7">
     <form id="form-id" action="" method="post">

        <button class="continuar" formnovalidate name=""
            type="submit" value="" onclick="animabotoncarga_direccion()">
            <p class="text_continuar">Continuar <i class="fa-solid fa-chevron-right"></i></p>
    </button>

        {% csrf_token %}
        {{ wizard.management_form }}

        {% include "base/logo.html" %}

        {% if form.errors %}
            {% include "modals/base.html" with modal_context=form|get_modal_context  %}
        {% endif %}

        {% if wizard.form.forms %}
            {{ wizard.form.management_form }}
        {% else %}

            <div class="cont_inpu_direccion">
            <input required class="inp_vist7 " type="text"
                   name="digitaDireccionBarrio-direccion" autofocus
                   maxlength="40" id="id_digitaDireccionBarrio-direccion">

               <p class="inputext_direccion">Ingrese la Direcci√≥n</p>
            </div>


            <h1 class="vist7">Elige el barrio.</h1>

            <div class="filt">
                <input class="inpfilt" id="escri" type="text" placeholder="Buscar..." autocomplete="off">
                <div class="icon"> <span class="foricon"><i class="fa-solid fa-magnifying-glass"></i></span></div>
            </div>

            <div id="elecci" class="elec">
                {% for barrio in wizard.form.barrio %}
                    <div class="row-radio-btn">{{ barrio.tag }}
                    <label class="label-radio" for="{{ barrio.id_for_label }}">{{ barrio.choice_label }}</label>
                    </div>
                {% endfor %}
            </div>

        {% endif %}
         <button class="btn" id="btn_conti" type="submit">
            <span class="btn-text">Continuar</span>
            <span class="loader" style="display: none;"></span>
        </button>
    </form>

    <div class="conten-progreso-global"><div class="pagina">Paso {{ wizard.steps.step1 }} de 7</div>
        <div class="contenedor">
            <div class="progreso-contenedor">
               <div class="progreso4" id="progreso"></div>
               <div class="circulo active"></div>
               <div class="circulo active"></div>
               <div class="circulo active"></div>
               <div class="circulo active"></div>
               <div class="circulo"></div>
               <div class="circulo"></div>
            </div>
        </div>
      </div>

</section>
{% endblock %}
{% block extrajs %}
<script>
  const input = document.getElementById('escri');
  const radios = document.querySelectorAll('input[name="digitaDireccionBarrio-barrio"]');

  radios.forEach(radio => {
    radio.addEventListener('change', () => {
      const label = document.querySelector(`label[for="${radio.id}"]`);
      input.value = label.textContent;
    });

    // Initialize input with the checked radio on page load
    if (radio.checked) input.value = document.querySelector(`label[for="${radio.id}"]`).textContent;
  });
</script>
{% endblock %}